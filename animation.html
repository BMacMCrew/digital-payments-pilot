<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHS Digital Payments Pilot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            max-width: 1400px;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        h1 {
            text-align: center;
            color: #e94560;
            margin-bottom: 10px;
            font-size: 32px;
        }
        .subtitle {
            text-align: center;
            color: #a0a0a0;
            margin-bottom: 30px;
            font-size: 16px;
        }
        .animation-container {
            position: relative;
            width: 100%;
            height: 650px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            overflow: visible;
            margin-bottom: 20px;
        }
        .step-label {
            position: absolute;
            top: 10px;
            left: 20px;
            font-size: 17px;
            font-weight: 600;
            color: #e94560;
            opacity: 0;
            transition: opacity 0.3s;
            background: rgba(0, 0, 0, 0.8);
            padding: 12px 24px;
            border-radius: 8px;
            border: 1px solid #e94560;
            max-width: 90%;
            z-index: 100;
            line-height: 1.4;
        }
        .step-label.active {
            opacity: 1;
        }
        .controls {
            margin-top: 30px;
            text-align: center;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        button {
            background: linear-gradient(135deg, #e94560 0%, #0f3460 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.4);
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-top: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e94560 0%, #0f3460 100%);
            width: 0%;
            transition: width 0.5s ease;
        }
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DHS Digital Payments Pilot</h1>
        <div class="subtitle">Blockchain Orchestration ‚Ä¢ Smart Contracts ‚Ä¢ Atomic Settlements</div>
        
        <div class="animation-container">
            <svg id="animation" width="100%" height="100%" viewBox="0 0 1200 650">
                <defs>
                    <linearGradient id="actusGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#e94560;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#0f3460;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="treasuryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#0f3460;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#533483;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="fiservGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#16a085;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#27ae60;stop-opacity:1" />
                    </linearGradient>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#e94560"/>
                    </marker>
                    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#27ae60"/>
                    </marker>
                    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#667eea"/>
                    </marker>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                
                <!-- User/Buyer (stick figure) -->
                <g id="buyer" transform="translate(50, 80)">
                    <circle cx="40" cy="30" r="18" fill="#FFD700" stroke="#333" stroke-width="2"/>
                    <line x1="40" y1="48" x2="40" y2="85" stroke="#333" stroke-width="3"/>
                    <line x1="40" y1="60" x2="20" y2="75" stroke="#333" stroke-width="3"/>
                    <line x1="40" y1="60" x2="60" y2="75" stroke="#333" stroke-width="3"/>
                    <line x1="40" y1="85" x2="25" y2="110" stroke="#333" stroke-width="3"/>
                    <line x1="40" y1="85" x2="55" y2="110" stroke="#333" stroke-width="3"/>
                    <text x="40" y="135" text-anchor="middle" font-size="13" fill="#fff" font-weight="600">DHS Buyer</text>
                </g>
                
                <!-- Actus Platform (Frontend + Orchestration) -->
                <g id="actus" transform="translate(200, 30)">
                    <rect width="280" height="280" rx="15" fill="url(#actusGrad)" stroke="#e94560" stroke-width="3" filter="url(#glow)"/>
                    <text x="140" y="30" text-anchor="middle" font-size="18" fill="#fff" font-weight="700">ACTUS</text>
                    <text x="140" y="50" text-anchor="middle" font-size="12" fill="rgba(255,255,255,0.9)">Procurement Frontend & Orchestration Layer</text>
                    
                    <!-- Frontend Components -->
                    <text x="140" y="75" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.7)" font-style="italic">User Interface</text>
                    <rect x="20" y="85" width="110" height="45" rx="5" fill="rgba(255, 255, 255, 0.15)"/>
                    <text x="75" y="103" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">PO Creation</text>
                    <text x="75" y="117" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">& Management</text>
                    
                    <rect x="150" y="85" width="110" height="45" rx="5" fill="rgba(255, 255, 255, 0.15)"/>
                    <text x="205" y="103" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Invoice</text>
                    <text x="205" y="117" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Capture</text>
                    
                    <!-- Orchestration Components -->
                    <text x="140" y="150" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.7)" font-style="italic">Blockchain Orchestration</text>
                    <rect x="20" y="160" width="85" height="45" rx="5" fill="rgba(255, 255, 255, 0.15)"/>
                    <text x="62" y="178" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Smart</text>
                    <text x="62" y="192" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Contracts</text>
                    
                    <rect x="115" y="160" width="75" height="45" rx="5" fill="rgba(255, 255, 255, 0.15)"/>
                    <text x="152" y="178" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">3-Way</text>
                    <text x="152" y="192" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Match</text>
                    
                    <rect x="200" y="160" width="60" height="45" rx="5" fill="rgba(255, 255, 255, 0.15)"/>
                    <text x="230" y="178" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">SPR</text>
                    <text x="230" y="192" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Builder</text>
                    
                    <rect x="65" y="215" width="150" height="45" rx="5" fill="rgba(255, 255, 255, 0.15)"/>
                    <text x="140" y="233" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Blockchain Ledger</text>
                    <text x="140" y="247" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.8)">(Immutable Audit Trail)</text>
                </g>
                
                <!-- Agency ERP System -->
                <g id="erp" transform="translate(550, 100)">
                    <rect width="200" height="140" rx="10" fill="rgba(255, 255, 255, 0.1)" stroke="#667eea" stroke-width="2"/>
                    <text x="100" y="30" text-anchor="middle" font-size="14" fill="#fff" font-weight="600">DHS Agency ERP</text>
                    <text x="100" y="50" text-anchor="middle" font-size="11" fill="#a0a0a0">(SAP/Oracle/Momentum)</text>
                    <text x="100" y="70" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.7)" font-style="italic">Via Ascella Integration</text>
                    <rect x="30" y="85" width="140" height="15" rx="3" fill="#667eea" opacity="0.5"/>
                    <text x="100" y="96" text-anchor="middle" font-size="9" fill="#fff">SPR Routing Layer</text>
                    <rect x="30" y="105" width="140" height="15" rx="3" fill="#667eea" opacity="0.5"/>
                    <text x="100" y="116" text-anchor="middle" font-size="9" fill="#fff">Validation Gateway</text>
                </g>
                
                <!-- Certifying Officer -->
                <g id="certifier" transform="translate(825, 100)">
                    <rect width="180" height="140" rx="10" fill="rgba(255, 255, 255, 0.1)" stroke="#f39c12" stroke-width="2"/>
                    <text x="90" y="30" text-anchor="middle" font-size="14" fill="#fff" font-weight="600">Certifying Officer</text>
                    <text x="90" y="50" text-anchor="middle" font-size="11" fill="#a0a0a0">Dual Authorization</text>
                    <circle cx="90" cy="95" r="30" fill="none" stroke="#f39c12" stroke-width="2"/>
                    <text x="90" y="105" text-anchor="middle" font-size="28" fill="#f39c12">‚úì</text>
                </g>
                
                <!-- Treasury BFS/PAM -->
                <g id="treasury" transform="translate(550, 330)">
                    <rect width="280" height="170" rx="15" fill="url(#treasuryGrad)" stroke="#533483" stroke-width="3"/>
                    <text x="140" y="30" text-anchor="middle" font-size="16" fill="#fff" font-weight="700">Treasury BFS</text>
                    <text x="140" y="48" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.8)">Payment Authorization Manager (PAM)</text>
                    
                    <rect x="20" y="65" width="115" height="40" rx="5" fill="rgba(255, 255, 255, 0.15)"/>
                    <text x="77" y="82" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">SPR</text>
                    <text x="77" y="96" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Validation</text>
                    
                    <rect x="145" y="65" width="115" height="40" rx="5" fill="rgba(255, 255, 255, 0.15)"/>
                    <text x="202" y="82" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">CGAC/TAS</text>
                    <text x="202" y="96" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Verification</text>
                    
                    <rect x="82" y="115" width="115" height="40" rx="5" fill="rgba(255, 255, 255, 0.15)"/>
                    <text x="139" y="132" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">PAM</text>
                    <text x="139" y="146" text-anchor="middle" font-size="10" fill="#fff" font-weight="600">Approval</text>
                </g>
                
                <!-- Fiserv Payment Execution -->
                <g id="fiserv" transform="translate(200, 380)">
                    <rect width="280" height="150" rx="15" fill="url(#fiservGrad)" stroke="#27ae60" stroke-width="3"/>
                    <text x="140" y="30" text-anchor="middle" font-size="16" fill="#fff" font-weight="700">Fiserv</text>
                    <text x="140" y="48" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.8)">Payment Execution Engine</text>
                    
                    <rect x="15" y="65" width="60" height="35" rx="5" fill="rgba(255, 255, 255, 0.2)"/>
                    <text x="45" y="87" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">RTP</text>
                    
                    <rect x="85" y="65" width="60" height="35" rx="5" fill="rgba(255, 255, 255, 0.2)"/>
                    <text x="115" y="87" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">FedNow</text>
                    
                    <rect x="155" y="65" width="50" height="35" rx="5" fill="rgba(255, 255, 255, 0.2)"/>
                    <text x="180" y="87" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">ACH</text>
                    
                    <rect x="215" y="65" width="50" height="35" rx="5" fill="rgba(255, 255, 255, 0.2)"/>
                    <text x="240" y="87" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">G2B</text>
                    
                    <text x="140" y="125" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.9)" font-weight="600">Atomic Settlement Execution</text>
                </g>
                
                <!-- Supplier -->
                <g id="supplier" transform="translate(200, 570)">
                    <rect width="200" height="70" rx="10" fill="rgba(255, 255, 255, 0.1)" stroke="#27ae60" stroke-width="2"/>
                    <text x="100" y="30" text-anchor="middle" font-size="14" fill="#fff" font-weight="600">Supplier</text>
                    <rect x="50" y="45" width="100" height="18" rx="5" fill="#27ae60" opacity="0.5"/>
                    <text x="100" y="58" text-anchor="middle" font-size="11" fill="#fff" font-weight="600">PAID ‚úì</text>
                </g>
                
                <!-- Animated Arrows -->
                <path id="flow1" d="M 140 150 L 200 150" stroke="#e94560" stroke-width="3" opacity="0" marker-end="url(#arrowhead)"/>
                <path id="flow2" d="M 480 170 L 550 170" stroke="#e94560" stroke-width="3" opacity="0" marker-end="url(#arrowhead)"/>
                <path id="flow3" d="M 750 170 L 825 170" stroke="#e94560" stroke-width="3" opacity="0" marker-end="url(#arrowhead)"/>
                <path id="flow4" d="M 915 240 L 690 330" stroke="#e94560" stroke-width="3" opacity="0" marker-end="url(#arrowhead)"/>
                <path id="flow5" d="M 550 415 L 480 455" stroke="#27ae60" stroke-width="3" opacity="0" marker-end="url(#arrowgreen)"/>
                <path id="flow6" d="M 340 530 L 340 570" stroke="#27ae60" stroke-width="3" opacity="0" marker-end="url(#arrowgreen)"/>
                <path id="flow7" d="M 340 310 L 340 380" stroke="#667eea" stroke-width="3" opacity="0" marker-end="url(#arrowblue)" stroke-dasharray="5,5"/>
                
                <!-- SPR Document -->
                <g id="spr-doc" opacity="0">
                    <rect x="360" y="260" width="60" height="50" rx="5" fill="#fff" stroke="#e94560" stroke-width="2"/>
                    <line x1="370" y1="270" x2="410" y2="270" stroke="#333" stroke-width="1"/>
                    <line x1="370" y1="280" x2="410" y2="280" stroke="#333" stroke-width="1"/>
                    <line x1="370" y1="290" x2="410" y2="290" stroke="#333" stroke-width="1"/>
                    <text x="390" y="305" text-anchor="middle" font-size="8" fill="#e94560" font-weight="700">SPR</text>
                </g>
                
                <!-- Blockchain Chain -->
                <g id="blockchain" opacity="0">
                    <rect x="210" y="15" width="25" height="20" rx="3" fill="#FFD700" stroke="#e94560" stroke-width="1"/>
                    <line x1="235" y1="25" x2="250" y2="25" stroke="#FFD700" stroke-width="2"/>
                    <rect x="250" y="15" width="25" height="20" rx="3" fill="#FFD700" stroke="#e94560" stroke-width="1"/>
                    <line x1="275" y1="25" x2="290" y2="25" stroke="#FFD700" stroke-width="2"/>
                    <rect x="290" y="15" width="25" height="20" rx="3" fill="#FFD700" stroke="#e94560" stroke-width="1"/>
                </g>
                
                <!-- Success Checkmark -->
                <circle id="success-ring" cx="300" cy="605" r="35" stroke="#27ae60" stroke-width="4" fill="none" opacity="0"/>
                <path id="success-check" d="M 285 605 L 295 615 L 315 590" stroke="#27ae60" stroke-width="5" fill="none" stroke-linecap="round" opacity="0"/>
            </svg>
            
            <!-- Step Labels -->
            <div id="label1" class="step-label">Step 1: DHS Buyer creates Purchase Order in Actus platform</div>
            <div id="label2" class="step-label">Step 2: Invoice captured in Actus; Smart contracts validate 3-way match (PO = Invoice = Receipt)</div>
            <div id="label3" class="step-label">Step 3: Actus builds blockchain-backed SPR with CGAC/TAS codes and compliance evidence</div>
            <div id="label4" class="step-label">Step 4: SPR routed through Agency ERP (via Ascella) to validate against obligations</div>
            <div id="label5" class="step-label">Step 5: SPR forwarded to Certifying Officer for dual authorization review</div>
            <div id="label6" class="step-label">Step 6: Certified SPR sent to Treasury BFS Payment Authorization Manager (PAM)</div>
            <div id="label7" class="step-label">Step 7: Treasury validates SPR against budget authority and CGAC/TAS; PAM approval returned</div>
            <div id="label8" class="step-label">Step 8: Actus receives approval and triggers Fiserv to execute payment</div>
            <div id="label9" class="step-label">Step 9: Fiserv executes atomic settlement via selected rail (RTP/FedNow/ACH/G2B)</div>
            <div id="label10" class="step-label">Complete! Supplier paid with full blockchain audit trail and immutable records ‚úì</div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-box" style="background: linear-gradient(135deg, #e94560, #0f3460);"></div>
                <span>Actus (Frontend & Orchestration)</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #667eea;"></div>
                <span>Agency ERP (Via Ascella)</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #f39c12;"></div>
                <span>Certifying Officer</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: linear-gradient(135deg, #0f3460, #533483);"></div>
                <span>Treasury BFS/PAM</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: linear-gradient(135deg, #16a085, #27ae60);"></div>
                <span>Fiserv Payment Execution</span>
            </div>
        </div>
        
        <div class="controls">
            <button id="playBtn">‚ñ∂ Play Full Animation</button>
            <button id="resetBtn">‚ü≤ Reset</button>
            <button id="slowBtn">üê¢ Slow Mode</button>
        </div>
    </div>

    <script>
        const elements = {
            flow1: document.getElementById('flow1'),
            flow2: document.getElementById('flow2'),
            flow3: document.getElementById('flow3'),
            flow4: document.getElementById('flow4'),
            flow5: document.getElementById('flow5'),
            flow6: document.getElementById('flow6'),
            flow7: document.getElementById('flow7'),
            sprDoc: document.getElementById('spr-doc'),
            blockchain: document.getElementById('blockchain'),
            successRing: document.getElementById('success-ring'),
            successCheck: document.getElementById('success-check'),
            progressFill: document.getElementById('progressFill')
        };
        
        let isAnimating = false;
        let animationSpeed = 1;

        function showLabel(num) {
            document.querySelectorAll('.step-label').forEach(label => label.classList.remove('active'));
            const label = document.getElementById(`label${num}`);
            if (label) label.classList.add('active');
        }

        function setOpacity(element, value) {
            if (element) element.setAttribute('opacity', value);
        }

        function wait(ms) {
            return new Promise(resolve => setTimeout(resolve, ms / animationSpeed));
        }

        async function playAnimation() {
            if (isAnimating) return;
            isAnimating = true;
            resetAnimation();
            await wait(500);
            
            // Step 1: Buyer creates PO in Actus
            showLabel(1);
            elements.progressFill.style.width = '10%';
            setOpacity(elements.flow1, 1);
            await wait(2000);
            
            // Step 2: Invoice captured in Actus
            showLabel(2);
            elements.progressFill.style.width = '20%';
            await wait(2000);
            
            // Step 3: Actus builds SPR with blockchain
            showLabel(3);
            elements.progressFill.style.width = '30%';
            setOpacity(elements.blockchain, 1);
            setOpacity(elements.sprDoc, 1);
            await wait(2000);
            
            // Step 4: SPR routed through ERP
            showLabel(4);
            elements.progressFill.style.width = '40%';
            setOpacity(elements.flow2, 1);
            await wait(1500);
            
            // Step 5: SPR to Certifying Officer
            showLabel(5);
            elements.progressFill.style.width = '50%';
            setOpacity(elements.flow3, 1);
            await wait(1500);
            
            // Step 6: Certified SPR to Treasury
            showLabel(6);
            elements.progressFill.style.width = '60%';
            setOpacity(elements.flow4, 1);
            await wait(1500);
            
            // Step 7: Treasury validation and approval
            showLabel(7);
            elements.progressFill.style.width = '70%';
            await wait(2000);
            
            // Step 8: Approval back to Actus, trigger Fiserv
            showLabel(8);
            elements.progressFill.style.width = '80%';
            setOpacity(elements.flow5, 1);
            setOpacity(elements.flow7, 1);
            await wait(1500);
            
            // Step 9: Atomic settlement execution
            showLabel(9);
            elements.progressFill.style.width = '90%';
            setOpacity(elements.flow6, 1);
            await wait(1500);
            
            // Step 10: Complete
            showLabel(10);
            elements.progressFill.style.width = '100%';
            setOpacity(elements.successRing, 1);
            setOpacity(elements.successCheck, 1);
            
            isAnimating = false;
        }

        function resetAnimation() {
            Object.values(elements).forEach(el => {
                if (el && el !== elements.progressFill) setOpacity(el, 0);
            });
            elements.progressFill.style.width = '0%';
            document.querySelectorAll('.step-label').forEach(label => label.classList.remove('active'));
            isAnimating = false;
        }

        document.getElementById('playBtn').addEventListener('click', playAnimation);
        document.getElementById('resetBtn').addEventListener('click', resetAnimation);
        document.getElementById('slowBtn').addEventListener('click', () => {
            animationSpeed = animationSpeed === 1 ? 0.5 : 1;
            document.getElementById('slowBtn').textContent = animationSpeed === 1 ? 'üê¢ Slow Mode' : 'üêá Normal Speed';
        });
        
        setTimeout(playAnimation, 1000);
    </script>
</body>
</html>